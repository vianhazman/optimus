<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.3">
<title data-react-helmet="true">Architecture | Optimus</title><meta data-react-helmet="true" property="og:url" content="https://odpf.github.io/optimus/concepts/architecture/"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Architecture | Optimus"><meta data-react-helmet="true" name="description" content="Basic building blocks of Optimus are"><meta data-react-helmet="true" property="og:description" content="Basic building blocks of Optimus are"><link data-react-helmet="true" rel="shortcut icon" href="/optimus/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://odpf.github.io/optimus/concepts/architecture/"><link data-react-helmet="true" rel="alternate" href="https://odpf.github.io/optimus/concepts/architecture/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://odpf.github.io/optimus/concepts/architecture/" hreflang="x-default"><link rel="stylesheet" href="/optimus/assets/css/styles.42d826e0.css">
<link rel="preload" href="/optimus/assets/js/runtime~main.503f3f38.js" as="script">
<link rel="preload" href="/optimus/assets/js/main.1a1bf9e0.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/optimus/"><img src="/optimus/img/logo.svg" alt="Optimus Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/optimus/img/logo.svg" alt="Optimus Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Optimus</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/odpf/optimus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/optimus/"><img src="/optimus/img/logo.svg" alt="Optimus Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/optimus/img/logo.svg" alt="Optimus Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Optimus</b></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://github.com/odpf/optimus" target="_blank" rel="noopener noreferrer" class="menu__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu menu--responsive thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA" aria-label="Sidebar navigation"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/optimus/">Introduction</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/optimus/getting-started/installation/">Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/optimus/getting-started/configuration/">Configurations</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/optimus/guides/create-job/">Using Optimus to create a Job</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/optimus/guides/adding-hook/">Adding hook to a Job</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/optimus/guides/create-bigquery-dataset/">Create bigquery dataset</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/optimus/guides/create-bigquery-table/">Create bigquery table</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/optimus/guides/create-bigquery-view/">Create bigquery view</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/optimus/guides/organising-specifications/">Organising specifications</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/optimus/guides/optimus-serve/">Starting Optimus Server</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/optimus/guides/task-bq2bq/">Bigquery to bigquery transformation task</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Concepts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/optimus/concepts/overview/">Overview</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/optimus/concepts/architecture/">Architecture</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/optimus/concepts/intervals-and-windows/">Understanding Intervals and Windows</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Development</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/optimus/development/task-plugin/">Developing task plugin</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Contribute</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/optimus/contribute/contributing/">Contributing</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/optimus/reference/api/">API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/optimus/reference/faq/">FAQ</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="markdown"><header><h1 class="h1Heading_27L5">Architecture</h1></header><p>Basic building blocks of Optimus are</p><ul><li>Optimus CLI</li><li>Optimus Service</li><li>Optimus Database</li><li>Optimus Plugins</li><li>Scheduler</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="overview"></a>Overview<a class="hash-link" href="#overview" title="Direct link to heading">#</a></h3><p><img alt="Architecture Diagram" src="/optimus/assets/images/OptimusArchitecture_dark_07June2021-496f10b02b693c3113dd4800802b131e.png" title="OptimusArchitecture"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="optimus-cli"></a>Optimus CLI<a class="hash-link" href="#optimus-cli" title="Direct link to heading">#</a></h3><p><code>optimus</code> is a command line tool used to interact with the main optimus service and basic scaffolding job
specifications. It can be used to </p><ul><li>Generate jobs based on user inputs </li><li>Add hooks to existing jobs</li><li>Dump a compiled specification for the consumption of a scheduler</li><li>Deployment of specifications to <code>Optimus Service</code></li><li>Create resource specifications for datastores</li><li>Start optimus server</li></ul><p>Optimus also has an admin flag that can be turned on using <code>OPTIMUS_ADMIN_ENABLED=1</code> env flag.
This hides few commands which are used internally during the lifecycle of tasks/hooks
execution.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="optimus-service"></a>Optimus Service<a class="hash-link" href="#optimus-service" title="Direct link to heading">#</a></h3><p>Optimus cli can start a service that controls and orchestrates all that Optimus has to
offer. Optimus cli uses GRPC to communicate with the optimus service for almost all the
operations that takes <code>host</code> as the flag. Service also exposes few REST endpoints
that can be used with simple curl request for registering a new project or checking
the status of a job, etc.</p><p>As soon as jobs are ready in a repository, a deployment request is sent to the service
with all the specs(normally in yaml) which are parsed and stored in the database.
Once these specs are stored, each of them are compiled to generate a scheduler parsable
job format which will be eventually consumed by a supported scheduler to execute the
job. These compiled specifications are uploaded to an <strong>object store</strong> which gets synced
to the scheduler.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="optimus-database"></a>Optimus Database<a class="hash-link" href="#optimus-database" title="Direct link to heading">#</a></h3><p>Specifications once requested for deployment needs to be stored somewhere as a source
of truth. Optimus uses postgres as a storage engine to store raw specifications, job
assets, run details, project configurations, etc.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="optimus-plugins"></a>Optimus Plugins<a class="hash-link" href="#optimus-plugins" title="Direct link to heading">#</a></h3><p>Optimus itself doesn&#x27;t govern how a job is supposed to execute the transformation. It
only provides the building blocks which needs to be implemented by a task. A plugin is
divided in two parts, an adapter and a docker image. Docker image contains the actual
transformation logic that needs to be executed in the task and adapter helps optimus
to understand what all this task can do and help in doing it.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="scheduler"></a>Scheduler<a class="hash-link" href="#scheduler" title="Direct link to heading">#</a></h3><p>Job adapters consumes job specifications which eventually needs to be scheduled and
executed via a execution engine. This execution engine is termed here as Scheduler.
Optimus by default recommends using <code>Airflow</code> but is extensible enough to support any
other scheduler that satisfies some basic requirements, one of the most important
of all is, scheduler should be able to execute a Docker container.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/odpf/optimus/edit/master/docs/docs/concepts/architecture.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF">Last updated on <b><time datetime="2021-07-13T04:54:14.000Z">7/13/2021</time></b> by <b>Kush Sharma</b></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/optimus/concepts/overview/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Overview</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/optimus/concepts/intervals-and-windows/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Understanding Intervals and Windows Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link">Overview</a></li><li><a href="#optimus-cli" class="table-of-contents__link">Optimus CLI</a></li><li><a href="#optimus-service" class="table-of-contents__link">Optimus Service</a></li><li><a href="#optimus-database" class="table-of-contents__link">Optimus Database</a></li><li><a href="#optimus-plugins" class="table-of-contents__link">Optimus Plugins</a></li><li><a href="#scheduler" class="table-of-contents__link">Scheduler</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/optimus/">Documentation</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://join.slack.com/t/odpf-community/shared_invite/zt-qfokfy4j-30K9IzigF9Lsqpmt1Jen7Q" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/odpf/optimus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2020-2021 ODPF</div></div></div></footer></div>
<script src="/optimus/assets/js/runtime~main.503f3f38.js"></script>
<script src="/optimus/assets/js/main.1a1bf9e0.js"></script>
</body>
</html>